<!DOCTYPE html> 
<html> 
<head> 
    <title>Page Title</title> 
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="https://cdn.lineicons.com/2.0/LineIcons.css">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link rel="stylesheet" href="//use.fontawesome.com/releases/v5.0.7/css/all.css">
    <link href="https://fonts.googleapis.com/css2?family=Hind+Vadodara:wght@300;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
      <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="https://cdn.lineicons.com/2.0/LineIcons.css">
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Hind+Vadodara:wght@300;500&display=swap" rel="stylesheet">
     <script src=" https://kit.fontawesome.com/a076d05399.js"> 
    </script> 
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
 
    <style> 

      .dropbtn{
        margin-left: 100px;
      }


           .dropbtn {
        background-color: rgb(45, 177, 218);
        color: white;
        cursor: pointer;
      }
      
      .dropbtn:hover, .dropbtn:focus {
        background-color: #3e8e41;
      }
      
      .dropdown {
        float: right;
        position: relative;
        display: inline-block;
      }
      
      .dropdown-content {
        display: none;
        position: absolute;
        background-color: #f1f1f1;
        min-width: 160px;
        overflow: auto;
        box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
        right: 0;
        z-index: 1;
      }
      
      .dropdown-content a {
        color: black;
        padding: 8px 12px;
        text-decoration: none;
        display: block;
      }
      
      .dropdown a:hover {background-color: #ddd;}
      
      .show {display: block;}
          #wrap {
          background:#fff;
          margin:15px;
          position:fixed;
          overflow:hidden;
      }
      
      #content {
          width:80%;
          padding:2.5%;
         float:left;
      }
           * {
        margin: 0;
        padding: 0;
      }
      #cards_landscape_wrap-2{
        text-align: center;
        background: #F7F7F7;
      }
      #cards_landscape_wrap-2 .container{
        padding-top: 80px; 
        padding-bottom: 100px;
      }
      #cards_landscape_wrap-2 a{
        text-decoration: none;
        outline: none;
      }
      #cards_landscape_wrap-2 .card-flyer {
        border-radius: 5px;
      }
      #cards_landscape_wrap-2 .card-flyer .image-box{
        background: #ffffff;
        overflow: hidden;
        box-shadow: 0px 2px 15px rgba(0, 0, 0, 0.50);
        border-radius: 5px;
      }
      #cards_landscape_wrap-2 .card-flyer .image-box img{
        -webkit-transition:all .9s ease; 
        -moz-transition:all .9s ease; 
        -o-transition:all .9s ease;
        -ms-transition:all .9s ease; 
        width: 100%;
        height: 200px;
      }
      #cards_landscape_wrap-2 .card-flyer:hover .image-box img{
        opacity: 0.7;
        -webkit-transform:scale(1.15);
        -moz-transform:scale(1.15);
        -ms-transform:scale(1.15);
        -o-transform:scale(1.15);
        transform:scale(1.15);
      }
      #cards_landscape_wrap-2 .card-flyer .text-box{
        text-align: center;
      }
      #cards_landscape_wrap-2 .card-flyer .text-box .text-container{
        padding: 30px 18px;
      }
      #cards_landscape_wrap-2 .card-flyer{
        background: #FFFFFF;
        margin-top: 50px;
        -webkit-transition: all 0.2s ease-in;
        -moz-transition: all 0.2s ease-in;
        -ms-transition: all 0.2s ease-in;
        -o-transition: all 0.2s ease-in;
        transition: all 0.2s ease-in;
        box-shadow: 0px 3px 4px rgba(0, 0, 0, 0.40);
      }
      #cards_landscape_wrap-2 .card-flyer:hover{
        background: #fff;
        box-shadow: 0px 15px 26px rgba(0, 0, 0, 0.50);
        -webkit-transition: all 0.2s ease-in;
        -moz-transition: all 0.2s ease-in;
        -ms-transition: all 0.2s ease-in;
        -o-transition: all 0.2s ease-in;
        transition: all 0.2s ease-in;
        margin-top: 50px;
      }
      #cards_landscape_wrap-2 .card-flyer .text-box p{
        margin-top: 10px;
        margin-bottom: 0px;
        padding-bottom: 0px; 
        font-size: 14px;
        letter-spacing: 1px;
        color: #000000;
      }
      #cards_landscape_wrap-2 .card-flyer .text-box h6{
        margin-top: 0px;
        margin-bottom: 4px; 
        font-size: 18px;
        font-weight: bold;
        text-transform: uppercase;
        font-family: 'Roboto Black', sans-serif;
        letter-spacing: 1px;
        color: #00acc1;
      }
              .modalcss{
        width: 450px;
          height: 300px;
          margin: 0 auto;
          margin-top: 200px;
      }
      
      .modal {
          /* display: none; Hidden by default
          position: fixed; Stay in place */
          display: none;
          padding-left: 20%;
          padding-right: 500px;
          padding-top: 150px;
          background-color: rgb(0,0,0); /* Fallback color */
          background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
        }
        
        /* Modal Content */
        .modal-content {
          height: 100vh; 
          overflow: scroll;
          background-color: #fefefe;
          margin: auto;
          padding: 20px;
          border: 1px solid #888;
           /*width: 115%; */
          height: 500px;
        }
        
        /* The Close Button */
        .close {
          color: #aaaaaa;
          float: right;
          font-size: 28px;
          font-weight: bold;
        }
      .hr{
        width: 100%;
          background-color: #a9a997;
          height: 1px;
      }
      
      .custom-file-upload {
        border: 1px solid #ccc;
        display: inline-block;
        padding: 6px 12px;
        cursor: pointer; 
      }
      
      .send{
            width: 57px;
      margin-bottom: 12px;
          margin-top: -35px;
                  margin-left: 418px;
      }
           * {
        margin: 0;
        padding: 0;
      }
      body {
        font-family: "Hind Vadodara", -apple-system, BlinkMacSystemFont, Segoe UI,
          Helvetica Neue, Arial, sans-serif;
      }
      .container {
        display: flex;
        height: 100vh;
        width: 100vw;
        flex-wrap: wrap;
        overflow: hidden;
      }
      .main {
        height: calc(100% - 50px);
        display: flex;
        flex: 1;
      }
      .sidebar {
        height: 100%;
        width: 290px;
        box-sizing: border-box;
        box-shadow: 0 0 2rem 0 rgb(0 0 0 / 5%);
        overflow: hidden;
        transition: width 0.5s ease;
      }
      .container.nav-closed .sidebar,
      .container.nav-closed .header-logo {
        width: 0;
      }
      .sidebar ul {
        display: flex;
        flex-direction: column;
        padding: 5px;
      }
      .sidebar ul li {
        display: flex;
        align-items: center;
      }
      .sidebar ul li a {
        color: #000;
        text-decoration: none;
        display: flex;
        align-items: center;
        width: 100%;
        padding: 10px;
        white-space: nowrap;
      }
      .sidebar ul li a.active,
      .sidebar ul li a:hover {
        background: #e8ecef;
      }
      .sidebar ul li span {
        margin-left: 16px;
        font-size: 16px;
        font-weight: 100;
      }
      .sidebar ul li i {
        font-size: 18px;
        color: #111;
        font-weight: normal;
      }
      .header {
        height: 50px;
        background: #303f9f;
        width: 100%;
        display: flex;
        align-items: center;
        flex-basis: 100%;
      }
      .sidebar ul li a.active i {
        color: #303f9e;
      }
      .site-logo {
        height: 32px;
        width: 32px;
        min-height: 32px;
        min-width: 32px;
        margin: 0 18px 0 15px;
      }
      .site-logo path {
        fill: #fff;
      }
      .site-title {
        color: #fff;
        font-size: 24px;
        letter-spacing: 1px;
        font-weight: 400;
      }
      .page-content {
        padding: 10px 20px;
        box-sizing: border-box;
        width: 100%;
        flex: 1;
      }
      .page-content h1 {
        font-size: 20px;
        font-weight: 400;
        color: #333;
      }
      .header-search {
        height: 100%;
        align-items: center;
        display: flex;
        padding: 0 20px;
        flex: 1;
      }
      .header-search .button-menu {
        width: 28px;
        height: 28px;
        margin-right: 15px;
        background: none;
        border: 0;
        cursor: pointer;
      }
      .header-logo {
        display: flex;
        align-items: center;
        width: 220px;
        overflow: hidden;
        transition: width 0.5s ease;
      }
      .header-search input[type="search"] {
        height: 100%;
        width: 300px;
        padding: 10px 20px;
        box-sizing: border-box;
        font-size: 14px;
        font-weight: 100;
        background: none;
        border: none;
        color: #fff;
      }
      .header-search input[type="search"]:focus {
        outline: none;
      }
      .header-search input[type="search"]::placeholder {
        color: #ccc;
      }
      .header-search .button-menu:focus {
        outline: none;
        border: none;
      }
      .header-search .button-menu svg path {
        fill: #fff;
      }
      @media screen and (max-width: 991px) {
        .page-content {
          width: 100vw;
        }
      }
      @media screen and (max-width: 767px) {
        .header-logo {
          display: none;
        }
      }
      
      ::-webkit-scrollbar {
        -webkit-appearance: none;
        width: 7px;
      }
      ::-webkit-scrollbar-thumb {
        border-radius: 4px;
        background-color: rgba(0, 0, 0, .5);
        -webkit-box-shadow: 0 0 1px rgba(255, 255, 255, .5);
      }
  #table-scroll {
  height:550px;
  overflow:auto;  
  margin-top:20px;
}


</style> 
</head> 
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap-theme.min.css">
<link rel="stylesheet" href="https://cdn.lineicons.com/2.0/LineIcons.css">
<link rel="preconnect" href="https://fonts.gstatic.com">
<link rel="stylesheet" href="//use.fontawesome.com/releases/v5.0.7/css/all.css">
<link href="https://fonts.googleapis.com/css2?family=Hind+Vadodara:wght@300;500&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">


<body>


<!-- navbar call -->
<%- include('./partials/navbar.ejs') %>
  <div class="main">
    <div class="sidebar">
      <ul>
        <li><a href="/create_batches" class="active" ><i class="fa fa-list-alt" aria-hidden="true"></i><span>Create Batches</span></a></li>
        <li><a href="#" ><i class="far fa-calendar"></i><span>Attendence</span></a></li>
        <li><a href="/students" ><i class="fa fa-users" aria-hidden="true"></i><span>Students</span></a></li>
        <li><a href="./admin_assignment" ><i class="fa fa-tasks"></i><span>Assignments</span></a></li>
        <li><a href='/announcements'  ><i class="fa fa-bullhorn"></i><span>Announcements</span></a></li>
        <li><a href="/test" ><i class="fa fa-trophy" aria-hidden="true"></i><span>Tests</span></a></li>
        <li><a href="/admin_video" ><i class="far fa-file-video"></i><span>Vedios</span></a></li>
        <li><a href="#" ><i class="fa fa-graduation-cap" aria-hidden="true"></i><span>Live classes</span></a></li>
        <li><a href="/admin_material" ><i class="fa fa-book" aria-hidden="true"></i><span>Study material</span></a></li>
        <li><a href="#" ><i class="fa fa-cog"></i><span>Settings</span></a></li>
</ul>
    </div>

    <!--test section-->
    


    <div class="container-fluid admin">
      <div class="col-md-12 alert alert-primary">Quiz List</div>
      <input type="text" id="myInput" placeholder="Search.." onkeyup="searchFun()" />
      <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal"><i class="fa fa-plus"></i>	Add New</button>
     <!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Add new quiz</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form method="POST" action="/test" >
            <div class="form-group">
                <label for="exampleInputEmail1">Title</label>
                <input type="text" class="form-control" id="exampleInputEmail1" aria-describedby="title" placeholder="Enter test subject" name="title">
                <small id="title" class="form-text text-muted"></small>
            </div>
            <div class="form-group">
                <label for="points">Points per question</label>
                <input type="text" class="form-control" id="points" name="points" placeholder="points">
            </div>
            <div class="form-group">
                <label for="questions">total questions</label>
                <input type="text" class="form-control" id="questions" name="questions" placeholder="total questions">
            </div>
            <div class="form-group">
                <label for="time">Total Time In Minutes</label>
                <input type="text" class="form-control" id="time" name="time" placeholder="time in min">
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button class="btn btn-primary" id="submit" onclick="submit()" type="submit">submit</button>
            </div>
          
        </form>
    </div>
      
    </div>
  </div>
</div>
      <br>
      <br>
      <div class="card">
        <div class="card-body">
          <div  id="table-scroll" class="card-body p-0" style="margin-left: -14px;">
          <table class="table table-bordered" id='table'>
            
            <thead>
              <tr>
                <th>#</th>
               
                <th>Title</th>
                <th>Items</th>
                <th>Point per Items</th>
                <?php if($_SESSION['login_user_type'] ==1): ?>
                <th>Faculty</th>
                <th>duration (min)</th>
                <?php endif; ?>
                <th>Action</th>
              </tr>
              
            </thead>
            <tbody id="myTable">
                <% for(var test of testData){ %>
                    <tr>
                    <td>1</td>
                    <td ><%=test.title%></td>
                    <td><%=test.total_questions%></td>
                    <td><%=test.points%></td>
                        
                    <td><%=test.faculty%></td>
                    <td><%=test.duration%></td>
                    <td>
                        <center>
                            <a class="btn btn-sm btn-outline-primary edit_quiz" href="/view_test?id=<%=test._id%>"><i class="fa fa-task"></i> Manage</a>
                            <a class="btn btn-sm btn-outline-primary edit_quiz"  href="/view_test" data-toggle="modal" data-target="#<%=test._id%>"><i class="fa fa-edit"></i> Edit</a>
                                <!-- Modal -->
                            <div class="modal fade" id="<%=test._id%>" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                            <div class="modal-dialog" role="document">
                                <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="exampleModalLabel">Edit quiz</h5>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                                <div class="modal-body">
                                    <form method="POST" action="/test?id=<%=test._id%>">
                                        <div class="form-group">
                                            <label for="exampleInputEmail1">Title.!!!!!</label>
                                            <input type="text" class="form-control" id="exampleInputEmail1" aria-describedby="title" value="<%=test.title%>" placeholder="Enter test subject" name="title">
                                            <small id="title" class="form-text text-muted"></small>
                                        </div>
                                        <div class="form-group">
                                            <label for="points">Points per question</label>
                                            <input type="text" class="form-control" id="points" name="points" placeholder="points" value="<%=test.points%>">
                                        </div>
                                        <div class="form-group">
                                            <label for="questions">total questions</label>
                                            <input type="text" class="form-control" id="questions" name="questions" placeholder="total questions" value="<%=test.total_questions%>">
                                        </div>
                                        <div class="form-group">
                                            <label for="time">Total Time In Minutes.!!!!!!!!</label>
                                            <input type="text" class="form-control" id="time" name="time" placeholder="time in min" value="<%=test.duration%>">
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                            <button class="btn btn-primary" type="submit">submit</button>
                                        </div>
                                    </form>                            
                                </div>
                               
                                </div>
                            </div>
                            </div>
                            
                            <button class="btn btn-sm btn-outline-danger remove_quiz" id="b5" type="button"  onclick="call('<%=test._id%>')"><i class="fa fa-trash"></i> Delete</button>
                        </center>
                    </td>
                    </tr>
                <% } %>
            </tbody>
          </table>
            </div>
        </div>
      </div>
    </div>
   
  
  </body>
  <script>
    const searchFun=()=>{
      var filter=document.getElementById('myInput').value.toUpperCase();
      var myTable=document.getElementById('myTable');
      var tr=myTable.getElementsByTagName('tr');
      for(var i=0;i<tr.length;i++){
        var td=tr[i].getElementsByTagName('td')[1];
        if(td){
          var textvalue=td.innerHTML.toUpperCase();
          if(textvalue.indexOf(filter)>-1){
            tr[i].style.display="";
          }
          else{
            tr[i].style.display='none';
          }
        }
      }
    }
    var call = function(testId){
      console.log(testId);
      swal({
            title: "Are you sure?",
            text: "You want to delete the test",
            type: "warning",
            showCancelButton: true,
            confirmButtonColor: '#DD6B55',
            confirmButtonText: 'Yes, delete it!',
            cancelButtonText: "No, cancel!",
            closeOnConfirm: false,
            closeOnCancel: false
          },
          function(isConfirm){
            if (isConfirm){
              fetch('http://localhost:8000/api/test/deleteTest/'+testId, {
                method: 'DELETE', // or 'PUT'
                headers: {
                  'Content-Type': 'application/json',
                }
              })
              .then(response => response.json())
              .then(data => {
                swal("Deleted!", "test has been removed successfully!", "success");
                  window.location.href = '/test';
              })
              .catch((error) => {
                console.error('Error:', error);
                swal("Cancelled", "something went wrong", "error");
              });
            } else {
              swal("Cancelled", "test is not removed :)", "error");
            }
          });
        };
        document.getElementById('b4').onclick = function(){
          swal({
            title: "Are you sure?",
            text: "You want to Give test",
            type: "warning",
            showCancelButton: true,
            confirmButtonColor: '#DD6B55',
            confirmButtonText: 'Yes!',
            closeOnConfirm: false,
            //closeOnCancel: false
          },
          function(){
            console.log('yes!!!!!!!!!')
            window.location.href = '/welcome';
          });
        };
  </script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.js"></script>
  
     <!--Include jQuerry-->
     <script type="text/javascript" src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
  
     <!-- Include Date Range Picker -->
     <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.4.1/js/bootstrap-datepicker.min.js"></script>
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.4.1/css/bootstrap-datepicker3.css"/>
    

</html> 